import { Constants } from '../common/constants/Constants';

// æœç´¢æ ç»„ä»¶
@Component
export struct SearchBar {
  @Prop placeholder: string = 'æœç´¢å•†å“';
  @Prop showIcon: boolean = true;
  @Prop clickable: boolean = true;
  onSearchClick?: () => void = undefined;
  onSearchSubmit?: (value: string) => void = undefined;

  @State searchText: string = '';

  build() {
    Row() {
      // æœç´¢å›¾æ ‡
      if (this.showIcon) {
        Text('ðŸ”')
          .fontSize(16)
          .margin({ left: 12 })
      }

      if (this.clickable) {
        // å¯ç‚¹å‡»æ¨¡å¼ - æ˜¾ç¤ºå ä½æ–‡æœ¬
        Text(this.placeholder)
          .fontSize(14)
          .fontColor(Constants.TEXT_HINT)
          .layoutWeight(1)
          .margin({ left: 8, right: 12 })
      } else {
        // è¾“å…¥æ¨¡å¼
        TextInput({ placeholder: this.placeholder, text: this.searchText })
          .fontSize(14)
          .placeholderColor(Constants.TEXT_HINT)
          .placeholderFont({ size: 14 })
          .backgroundColor(Color.Transparent)
          .layoutWeight(1)
          .margin({ left: 8, right: 12 })
          .onChange((value: string) => {
            this.searchText = value;
          })
          .onSubmit(() => {
            if (this.onSearchSubmit) {
              this.onSearchSubmit(this.searchText);
            }
          })
      }
    }
    .height(36)
    .width('100%')
    .backgroundColor('#F5F5F5')
    .borderRadius(18)
    .onClick(() => {
      if (this.clickable && this.onSearchClick) {
        this.onSearchClick();
      }
    })
  }
}
